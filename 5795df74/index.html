<!DOCTYPE html>





<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/JavaReadingNotes/images/apple-touch-icon-next.png?v=7.4.1">
  <link rel="icon" type="image/png" sizes="32x32" href="/JavaReadingNotes/images/favicon-32x32-next.png?v=7.4.1">
  <link rel="icon" type="image/png" sizes="16x16" href="/JavaReadingNotes/images/favicon-16x16-next.png?v=7.4.1">
  <link rel="mask-icon" href="/JavaReadingNotes/images/logo.svg?v=7.4.1" color="#222">
  <meta name="google-site-verification" content="_Sly-yzHYmALHXzjFpPWsodMrjBSphw7bfRbMUH80Qc">
  <meta name="msvalidate.01" content="B1CFD346B8DEBBFE0C983C2AF8955531">
  <meta name="baidu-site-verification" content="vkMTwK56xr">

<link rel="stylesheet" href="/JavaReadingNotes/css/main.css?v=7.4.1">


<link rel="stylesheet" href="/JavaReadingNotes/lib/font-awesome/css/font-awesome.min.css?v=4.7.0">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/JavaReadingNotes/',
    scheme: 'Gemini',
    version: '7.4.1',
    exturl: false,
    sidebar: {"position":"right","display":"hide","offset":12,"onmobile":false},
    copycode: {"enable":true,"show_result":true,"style":"flat"},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":true},
    bookmark: {"enable":true,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: 'search.xml',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    translation: {
      copy_button: '复制',
      copy_success: '复制成功',
      copy_failure: '复制失败'
    },
    sidebarPadding: 40
  };
</script>

  <meta name="description" content="16.7 线程组和未处理的异常&amp;nbsp;线程组&amp;nbsp;子线程默认和父线程同组&amp;nbsp;一天是不良人一辈子都是不良人&amp;nbsp;Thread类线程组构造器&amp;nbsp;获取当前线程的线程组&amp;nbsp;ThreadGroup构造器&amp;nbsp;ThreadGroup方法&amp;nbsp;程序 线程组&amp;nbsp;线程组异常处理&amp;nbsp;处理线程组内抛出的异常&amp;nbsp;设置线程异常处理器&amp;nbsp;程序">
<meta property="og:type" content="article">
<meta property="og:title" content="16.7 线程组和未处理的异常">
<meta property="og:url" content="https://lanlan2017.github.io/JavaReadingNotes/5795df74/index.html">
<meta property="og:site_name" content="蓝蓝博客">
<meta property="og:description" content="16.7 线程组和未处理的异常&amp;nbsp;线程组&amp;nbsp;子线程默认和父线程同组&amp;nbsp;一天是不良人一辈子都是不良人&amp;nbsp;Thread类线程组构造器&amp;nbsp;获取当前线程的线程组&amp;nbsp;ThreadGroup构造器&amp;nbsp;ThreadGroup方法&amp;nbsp;程序 线程组&amp;nbsp;线程组异常处理&amp;nbsp;处理线程组内抛出的异常&amp;nbsp;设置线程异常处理器&amp;nbsp;程序">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2020-01-09T08:40:26.000Z">
<meta property="article:modified_time" content="2020-03-26T04:10:29.000Z">
<meta property="article:author" content="蓝蓝">
<meta property="article:tag" content="java">
<meta name="twitter:card" content="summary">
  <link rel="canonical" href="https://lanlan2017.github.io/JavaReadingNotes/5795df74/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: false,
    isPost: true,
    isPage: false,
    isArchive: false
  };
</script>

  <title>16.7 线程组和未处理的异常 | 蓝蓝博客</title>
  








  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/JavaReadingNotes/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">蓝蓝博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
      
      
      
        
        <li class="menu-item menu-item-home">
      
    

    <a href="/JavaReadingNotes/" rel="section"><i class="fa fa-fw fa-home"></i>首页</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-dir">
      
    

    <a href="/JavaReadingNotes/dir/" rel="section"><i class="fa fa-fw fa-sitemap"></i>目录</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-categories">
      
    

    <a href="/JavaReadingNotes/categories/" rel="section"><i class="fa fa-fw fa-th"></i>分类</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-archives">
      
    

    <a href="/JavaReadingNotes/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>归档</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-links">
      
    

    <a href="/JavaReadingNotes/links/" rel="section"><i class="fa fa-fw fa-link"></i>链接</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger">
        
          <i class="fa fa-search fa-fw"></i>搜索</a>
      </li>
    
  </ul>

</nav>
  <div class="site-search">
    <div class="popup search-popup">
    <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocorrect="off" autocapitalize="none"
           placeholder="搜索..." spellcheck="false"
           type="text" id="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result"></div>

</div>
<div class="search-pop-overlay"></div>

  </div>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

  <a href="https://github.com/lanlan2017" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
            

          <div id="content" class="content">
            

  <div class="posts-expand">
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block " lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://lanlan2017.github.io/JavaReadingNotes/JavaReadingNotes/5795df74/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="蓝蓝">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/JavaReadingNotes/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="蓝蓝博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">16.7 线程组和未处理的异常

          
        </h2>

        <div class="post-meta">
          <!-- 置顶插件添加 开始 -->
          
          <!-- 置顶插件添加 结束 -->
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2020-01-09 08:40:26" itemprop="dateCreated datePublished" datetime="2020-01-09T08:40:26+00:00">2020-01-09</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-03-26 04:10:29" itemprop="dateModified" datetime="2020-03-26T04:10:29+00:00">2020-03-26</time>
              </span>
            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/JavaReadingNotes/categories/1-%E7%96%AF%E7%8B%82Java%E8%AE%B2%E4%B9%89-%E7%AC%AC4%E7%89%88/" itemprop="url" rel="index"><span itemprop="name">1 疯狂Java讲义 (第4版)</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/JavaReadingNotes/categories/1-%E7%96%AF%E7%8B%82Java%E8%AE%B2%E4%B9%89-%E7%AC%AC4%E7%89%88/%E7%AC%AC16%E7%AB%A0-%E5%A4%9A%E7%BA%BF%E7%A8%8B/" itemprop="url" rel="index"><span itemprop="name">第16章 多线程</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/JavaReadingNotes/categories/1-%E7%96%AF%E7%8B%82Java%E8%AE%B2%E4%B9%89-%E7%AC%AC4%E7%89%88/%E7%AC%AC16%E7%AB%A0-%E5%A4%9A%E7%BA%BF%E7%A8%8B/16-7-%E7%BA%BF%E7%A8%8B%E7%BB%84%E5%92%8C%E6%9C%AA%E5%A4%84%E7%90%86%E7%9A%84%E5%BC%82%E5%B8%B8/" itemprop="url" rel="index"><span itemprop="name">16.7 线程组和未处理的异常</span></a></span>

                
                
              
            </span>
          

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
        
      
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/JavaReadingNotes/5795df74/#comments" itemprop="discussionUrl"><span class="post-comments-count valine-comment-count" data-xid="/JavaReadingNotes/5795df74/" itemprop="commentCount"></span></a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <div id='my_toc'><a href="/JavaReadingNotes/5795df74/#16-7-线程组和未处理的异常" class="header_1">16.7 线程组和未处理的异常</a>&nbsp;<br><a href="/JavaReadingNotes/5795df74/#线程组" class="header_2">线程组</a>&nbsp;<br><a href="/JavaReadingNotes/5795df74/#子线程默认和父线程同组" class="header_3">子线程默认和父线程同组</a>&nbsp;<br><a href="/JavaReadingNotes/5795df74/#一天是不良人一辈子都是不良人" class="header_3">一天是不良人一辈子都是不良人</a>&nbsp;<br><a href="/JavaReadingNotes/5795df74/#Thread类线程组构造器" class="header_3">Thread类线程组构造器</a>&nbsp;<br><a href="/JavaReadingNotes/5795df74/#获取当前线程的线程组" class="header_3">获取当前线程的线程组</a>&nbsp;<br><a href="/JavaReadingNotes/5795df74/#ThreadGroup构造器" class="header_3">ThreadGroup构造器</a>&nbsp;<br><a href="/JavaReadingNotes/5795df74/#ThreadGroup方法" class="header_3">ThreadGroup方法</a>&nbsp;<br><a href="/JavaReadingNotes/5795df74/#程序-线程组" class="header_3">程序 线程组</a>&nbsp;<br><a href="/JavaReadingNotes/5795df74/#线程组异常处理" class="header_2">线程组异常处理</a>&nbsp;<br><a href="/JavaReadingNotes/5795df74/#处理线程组内抛出的异常" class="header_3">处理线程组内抛出的异常</a>&nbsp;<br><a href="/JavaReadingNotes/5795df74/#设置线程异常处理器" class="header_3">设置线程异常处理器</a>&nbsp;<br><a href="/JavaReadingNotes/5795df74/#程序-为线程设置异常处理器" class="header_3">程序 为线程设置异常处理器</a>&nbsp;<br><a href="/JavaReadingNotes/5795df74/#异常处理器与通过-catch-捕获异常的不同" class="header_3">异常处理器与通过`catch`捕获异常的不同</a>&nbsp;<br></div>
<style>.header_1{margin-left: 1em;}.header_2{margin-left: 2em;}.header_3{margin-left: 3em;}.header_4{margin-left: 4em;}.header_5{margin-left: 5em;}.header_6{margin-left: 6em;}</style>
<a id="more"></a>
<script>if (navigator.platform.search('arm')==-1){document.getElementById('my_toc').style.display = 'none';}var e,p = document.getElementsByTagName('p');while (p.length>0) {e = p[0];e.parentElement.removeChild(e);}</script>

<!--end-->
<h1 id="16-7-线程组和未处理的异常"><a href="#16-7-线程组和未处理的异常" class="headerlink" title="16.7 线程组和未处理的异常"></a>16.7 线程组和未处理的异常</h1><h2 id="线程组"><a href="#线程组" class="headerlink" title="线程组"></a>线程组</h2><p><code>Java</code>使用<code>ThreadGroup</code>来表示线程组,它可以对一批线程进行分类管理,<code>Java</code>允许程序直接对线程组进行控制。<strong>对线程组的控制相当于同时控制这批线程</strong>。<br>用户创建的所有线程都属于指定线程组,如果程序没有显式指定线程属于哪个线程组,则该线程属于<strong>默认线程组</strong>。</p>
<h3 id="子线程默认和父线程同组"><a href="#子线程默认和父线程同组" class="headerlink" title="子线程默认和父线程同组"></a>子线程默认和父线程同组</h3><p><strong>在默认情况下,子线程和创建它的父线程处于同一个线程组内</strong>,例如A线程创建了B线程,并且没有指定B线程的线程组,则B线程属于A线程所在的线程组。</p>
<h3 id="一天是不良人一辈子都是不良人"><a href="#一天是不良人一辈子都是不良人" class="headerlink" title="一天是不良人一辈子都是不良人"></a>一天是不良人一辈子都是不良人</h3><p>一旦某个线程加入了指定线程组之后,该线程将一直属于该线程组,直到该线程死亡,线程运行中途不能改变它所属的线程组。</p>
<h3 id="Thread类线程组构造器"><a href="#Thread类线程组构造器" class="headerlink" title="Thread类线程组构造器"></a>Thread类线程组构造器</h3><p><code>Thread</code>类提供了如下几个构造器来设置新创建的线程属于哪个线程组。</p>
<table>
<thead>
<tr>
<th align="left">方法</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>Thread(ThreadGroup group, Runnable target)</code></td>
<td align="left">以<code>target</code>的<code>run()</code>方法作为线程执行体创建新线程,该线程属于<code>group</code>线程组。</td>
</tr>
<tr>
<td align="left"><code>Thread(ThreadGroup group, Runnable target, String name)</code></td>
<td align="left">以<code>target</code>的<code>run()</code>方法作为线程执行体创建新线程,该线程属于<code>group</code>线程组,且线程名为<code>name</code>。</td>
</tr>
<tr>
<td align="left"><code>Thread(ThreadGroup group, String name)</code></td>
<td align="left">创建新线程,新线程名为<code>name</code>,属于<code>group</code>线程组。</td>
</tr>
<tr>
<td align="left"><code>Thread(ThreadGroup group, Runnable target, String name, long stackSize)</code></td>
<td align="left">Allocates a new Thread object so that it has target as its run object, has the specified name as its name, and belongs to the thread group referred to by group, and has the specified stack size.</td>
</tr>
<tr>
<td align="left"><code>Thread(ThreadGroup group, Runnable target, String name, long stackSize, boolean inheritThreadLocals)</code></td>
<td align="left">Allocates a new Thread object so that it has target as its run object, has the specified name as its name, belongs to the thread group referred to by group, has the specified stackSize, and inherits initial values for inheritable thread-local variables if inheritThreadLocals is true.</td>
</tr>
</tbody></table>
<h3 id="获取当前线程的线程组"><a href="#获取当前线程的线程组" class="headerlink" title="获取当前线程的线程组"></a>获取当前线程的线程组</h3><p>因为<strong>中途不可改变线程所属的线程组</strong>,所以<code>Thread</code>类没有提供<code>setThreadGroup()</code>方法来改变线程所属的线程组,但提供了一个<code>getThreadGroup()</code>方法来返回该线程所属的线程组,<code>getThreadGroup()</code>方法的返回值是<code>ThreadGroup</code>对象,表示一个线程组。</p>
<table>
<thead>
<tr>
<th align="left">方法</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>ThreadGroup getThreadGroup()</code></td>
<td align="left">Returns the thread group to which this thread belongs.</td>
</tr>
</tbody></table>
<h3 id="ThreadGroup构造器"><a href="#ThreadGroup构造器" class="headerlink" title="ThreadGroup构造器"></a>ThreadGroup构造器</h3><p><code>ThreadGroup</code>类提供了如下两个简单的构造器来创建实例。</p>
<table>
<thead>
<tr>
<th align="left">方法</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>ThreadGroup(String name)</code></td>
<td align="left">以指定的线程组名字来创建新的线程组。</td>
</tr>
<tr>
<td align="left"><code>ThreadGroup(ThreadGroup parent, String name)</code></td>
<td align="left">以指定的名字、指定的父线程组创建一个新线程组。</td>
</tr>
</tbody></table>
<p>上面两个构造器在创建线程组实例时都必须为其指定一个名字,也就是说,线程组总会具有一个字符串类型的名字,该名字可通过调用<code>ThreadGroup</code>的<code>getName()</code>方法来获取,但<strong>不允许改变线程组的名字</strong>。</p>
<h3 id="ThreadGroup方法"><a href="#ThreadGroup方法" class="headerlink" title="ThreadGroup方法"></a>ThreadGroup方法</h3><p><code>ThreadGroup</code>类提供了如下几个常用的方法来操作整个线程组里的所有线程。</p>
<table>
<thead>
<tr>
<th align="left">方法</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>int activeCount()</code></td>
<td align="left">返回此线程组中活动线程的数目</td>
</tr>
<tr>
<td align="left"><code>void interrupt()</code></td>
<td align="left">中断此线程组中的所有线程</td>
</tr>
<tr>
<td align="left"><code>boolean isDaemon()</code></td>
<td align="left">判断该线程组是否是后台线程组</td>
</tr>
<tr>
<td align="left"><code>void setDaemon(boolean daemon)</code></td>
<td align="left">把该线程组设置成后台线程组。<br>后台线程组具有一个特征:<br><strong>当后台线程组的最后一个线程执行结束或最后一个线程被销毁后,后台线程组将自动销毁</strong>。</td>
</tr>
<tr>
<td align="left"><code>void setMaxPriority(int pri)</code></td>
<td align="left">设置线程组的最高优先级</td>
</tr>
</tbody></table>
<h3 id="程序-线程组"><a href="#程序-线程组" class="headerlink" title="程序 线程组"></a>程序 线程组</h3><p>下面程序创建了几个线程,它们分别属于不同的线程组,程序还将一个线程组设置成后台线程组。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyThread</span> <span class="keyword">extends</span> <span class="title">Thread</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 提供指定线程名的构造器</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MyThread</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(name);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 提供指定线程名、线程组的构造器</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MyThread</span><span class="params">(ThreadGroup group, String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(group, name);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">20</span>; i++) &#123;</span><br><span class="line">            System.out.println(getName() + <span class="string">" 线程的i变量"</span> + i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ThreadGroupTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 获取主线程所在的线程组，这是所有线程默认的线程组</span></span><br><span class="line">        ThreadGroup mainGroup = Thread.currentThread().getThreadGroup();</span><br><span class="line">        System.out.println(<span class="string">"主线程组的名字："</span> + mainGroup.getName());</span><br><span class="line">        System.out.println(<span class="string">"主线程组是否是后台线程组："</span> + mainGroup.isDaemon());</span><br><span class="line">        <span class="keyword">new</span> MyThread(<span class="string">"主线程组的线程"</span>).start();</span><br><span class="line">        ThreadGroup tg = <span class="keyword">new</span> ThreadGroup(<span class="string">"新线程组"</span>);</span><br><span class="line">        <span class="comment">// 设为后台线程</span></span><br><span class="line">        tg.setDaemon(<span class="keyword">true</span>);</span><br><span class="line">        System.out.println(<span class="string">"tg线程组是否是后台线程组："</span> + tg.isDaemon());</span><br><span class="line">        MyThread tt = <span class="keyword">new</span> MyThread(tg, <span class="string">"tg组的线程甲"</span>);</span><br><span class="line">        tt.start();</span><br><span class="line">        <span class="keyword">new</span> MyThread(tg, <span class="string">"tg组的线程乙"</span>).start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行效果:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">主线程组的名字：main</span><br><span class="line">主线程组是否是后台线程组：false</span><br><span class="line">tg线程组是否是后台线程组：true </span><br><span class="line">主线程组的线程 线程的i变量0    </span><br><span class="line">主线程组的线程 线程的i变量1    </span><br><span class="line">tg组的线程甲 线程的i变量0      </span><br><span class="line">tg组的线程乙 线程的i变量0      </span><br><span class="line">主线程组的线程 线程的i变量2    </span><br><span class="line">...</span><br><span class="line">tg组的线程乙 线程的i变量19</span><br><span class="line">tg组的线程甲 线程的i变量10</span><br><span class="line">...</span><br><span class="line">主线程组的线程 线程的i变量19</span><br><span class="line">tg组的线程甲 线程的i变量18</span><br><span class="line">tg组的线程甲 线程的i变量19</span><br></pre></td></tr></table></figure>
<h2 id="线程组异常处理"><a href="#线程组异常处理" class="headerlink" title="线程组异常处理"></a>线程组异常处理</h2><h3 id="处理线程组内抛出的异常"><a href="#处理线程组内抛出的异常" class="headerlink" title="处理线程组内抛出的异常"></a>处理线程组内抛出的异常</h3><p><code>ThreadGroup</code>内还定义了一个很有用的<code>uncaughtException</code>方法:</p>
<table>
<thead>
<tr>
<th align="left">方法</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>void uncaughtException(Thread t, Throwable e)</code></td>
<td align="left">该方法可以<strong>处理该线程组内的任意线程所抛出的未处理异常</strong></td>
</tr>
</tbody></table>
<p>从<code>Java5</code>开始,<code>Java</code>加强了线程的异常处理,如果线程执行过程中抛出了一个未处理异常,<code>JVM</code>在结束该线程之前会自动查找是否有对应的<code>Thread.UncaughtExceptionHandler</code>对象,如果找到该处理器对象,则会调用该对象的<code>uncaughtException(Thread t, Throwable e)</code>方法来处理该异常。</p>
<p><code>Thread.UncaughtExceptionHandler</code>是<code>Thread</code>类的一个静态内部接口,该接口内只有一个方法:<code>void uncaughtException(Thread t, Throwable e)</code>,该方法中的t代表出现异常的线程,而e代表该线程抛出的异常。</p>
<h3 id="设置线程异常处理器"><a href="#设置线程异常处理器" class="headerlink" title="设置线程异常处理器"></a>设置线程异常处理器</h3><p><code>Thread</code>类提供了如下两个方法来<strong>设置异常处理器</strong>。</p>
<table>
<thead>
<tr>
<th align="left">方法</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>static setDefaultUncaughtExceptionHandler(Thread.UncaughtExceptionHandler eh)</code></td>
<td align="left">为该线程类的所有线程实例设置默认的异常处理器。</td>
</tr>
<tr>
<td align="left"><code>set UncaughtExceptionHandler(Thread.UncaughtExceptionHandler eh)</code></td>
<td align="left">为指定的线程实例设置异常处理器</td>
</tr>
</tbody></table>
<p><code>ThreadGroup</code>类实现了<code>ThreadUncaughtHandler</code>接口,所以每个线程所属的<strong>线程组将会作为默认的异常处理器</strong>。当一个线程抛出未处理异常时,</p>
<ul>
<li>首先,<code>JVM</code>会査找该异常对应的异常处理器(<code>setUncaughtExceptionHandler</code>方法设置的异常处理器),如果找到该异常处理器,则将调用该异常处理器处理该异常;</li>
<li>否则,<code>JVM</code>将会调用该线程所属的线程组对象的<code>uncaughtException</code>方法来处理该异常线程组处理异常的默认流程如下。<ul>
<li>如果该线程组有父线程组,则调用父线程组的<code>uncaughtException()</code>方法来处理该异常</li>
<li>如果该线程实例所属的线程类有默认的异常处理器(由<code>setDefaultUncaughtExceptionHandler</code>方法设置的异常处理器),那么就调用该异常处理器来处理该异常。</li>
<li>如果该异常对象是<code>ThreadDeath</code>的对象,则不做任何处理;否则,将异常跟踪栈的信息打印到<code>System.Err</code>错误输出流,并结束该线程。</li>
</ul>
</li>
</ul>
<h3 id="程序-为线程设置异常处理器"><a href="#程序-为线程设置异常处理器" class="headerlink" title="程序 为线程设置异常处理器"></a>程序 为线程设置异常处理器</h3><p>下面程序为主线程设置了异常处理器,当主线程运行抛出未处理异常时,该异常处理器将会起作用</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义自己的异常处理器</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyExHandler</span> <span class="keyword">implements</span> <span class="title">Thread</span>.<span class="title">UncaughtExceptionHandler</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 实现uncaughtException方法，该方法将处理线程的未处理异常</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">uncaughtException</span><span class="params">(Thread t, Throwable e)</span> </span>&#123;</span><br><span class="line">        System.out.println(t + <span class="string">" 线程出现了异常："</span> + e);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ExHandler</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 设置主线程的异常处理器</span></span><br><span class="line">        Thread.currentThread().setUncaughtExceptionHandler(<span class="keyword">new</span> MyExHandler());</span><br><span class="line">        <span class="keyword">int</span> a = <span class="number">5</span> / <span class="number">0</span>; <span class="comment">// ①</span></span><br><span class="line">        System.out.println(<span class="string">"程序正常结束！"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上面程序的主方法中为主线程设置了异常处理器,而①号代码处将引发一个未处理异常,则该异常处理器会负责处理该异常。运行该程序,会看到如下输出:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Thread[main,5,main] 线程出现了异常：java.lang.ArithmeticException: &#x2F; by zero</span><br></pre></td></tr></table></figure>
<h3 id="异常处理器与通过catch捕获异常的不同"><a href="#异常处理器与通过catch捕获异常的不同" class="headerlink" title="异常处理器与通过catch捕获异常的不同"></a>异常处理器与通过<code>catch</code>捕获异常的不同</h3><p>从上面程序的执行结果来看,虽然程序中粗体字代码指定了异常处理器对未捕获的异常进行处理,而且该异常处理器也确实起作用了,但程序依然不会正常结束。这说明异常处理器与通过<code>catch</code>捕获异常是不同的:</p>
<ul>
<li>当使用<code>catch</code>捕获异常时,异常不会向上传播给上一级调用者;</li>
<li>但<strong>使用异常处理器对异常进行处理之后,异常依然会传播给上一级调用者</strong></li>
</ul>

    </div>

    
    
    
        
      
        

<div>
<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者： </strong>蓝蓝</li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="https://lanlan2017.github.io/JavaReadingNotes/5795df74/" title="16.7 线程组和未处理的异常">https://lanlan2017.github.io/JavaReadingNotes/5795df74/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fa fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！<br><strong><mark>如果图片无法显示</mark></strong>: <a href='https://lanlan2017.github.io/blog/9a6c2fdf/'>https://lanlan2017.github.io/blog/9a6c2fdf/</a></li>
</ul>
</div>

      

      <footer class="post-footer">

        

          <div class="post-nav">
            <div class="post-nav-next post-nav-item">
              
                <a href="/JavaReadingNotes/f2e9e8d2/" rel="next" title="16.6.3 使用阻塞队列(BlockingQueue)控制线程通信">
                  <i class="fa fa-chevron-left"></i> 16.6.3 使用阻塞队列(BlockingQueue)控制线程通信
                </a>
              
            </div>

            <span class="post-nav-divider"></span>

            <div class="post-nav-prev post-nav-item">
              
                <a href="/JavaReadingNotes/547f08c8/" rel="prev" title="16.8 线程池">
                  16.8 线程池 <i class="fa fa-chevron-right"></i>
                </a>
              
            </div>
          </div>
        
      </footer>
    
  </article>
  
  
  

  </div>


          </div>
          
    
    <div class="comments" id="comments"></div>
  

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">
        
        
        
        
      

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#16-7-线程组和未处理的异常"><span class="nav-text">16.7 线程组和未处理的异常</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#线程组"><span class="nav-text">线程组</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#子线程默认和父线程同组"><span class="nav-text">子线程默认和父线程同组</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#一天是不良人一辈子都是不良人"><span class="nav-text">一天是不良人一辈子都是不良人</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Thread类线程组构造器"><span class="nav-text">Thread类线程组构造器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#获取当前线程的线程组"><span class="nav-text">获取当前线程的线程组</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ThreadGroup构造器"><span class="nav-text">ThreadGroup构造器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ThreadGroup方法"><span class="nav-text">ThreadGroup方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#程序-线程组"><span class="nav-text">程序 线程组</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#线程组异常处理"><span class="nav-text">线程组异常处理</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#处理线程组内抛出的异常"><span class="nav-text">处理线程组内抛出的异常</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#设置线程异常处理器"><span class="nav-text">设置线程异常处理器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#程序-为线程设置异常处理器"><span class="nav-text">程序 为线程设置异常处理器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#异常处理器与通过catch捕获异常的不同"><span class="nav-text">异常处理器与通过catch捕获异常的不同</span></a></li></ol></li></ol></li></ol></div>
        
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image"
      src="/JavaReadingNotes/images/avatar.jpg"
      alt="蓝蓝">
  <p class="site-author-name" itemprop="name">蓝蓝</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        
          <a href="/JavaReadingNotes/archives/%20%7C%7C%20archive">
        
          <span class="site-state-item-count">1194</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
    
      
      
      <div class="site-state-item site-state-categories">
        
          
            <a href="/JavaReadingNotes/categories/%20%7C%7C%20th">
          
        
        <span class="site-state-item-count">425</span>
        <span class="site-state-item-name">分类</span>
        </a>
      </div>
    
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
      
      
        
      
      
        
      
        <a href="https://github.com/lanlan2017" title="GitHub &amp;rarr; https:&#x2F;&#x2F;github.com&#x2F;lanlan2017" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
    
  </div>
  <div class="cc-license motion-element" itemprop="license">
    
  
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="/JavaReadingNotes/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">蓝蓝</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v4.2.1</div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">主题 – <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> v7.4.1</div>

        












        
      </div>
    </footer>
  </div>

  
  <script src="/JavaReadingNotes/lib/anime.min.js?v=3.1.0"></script>
  <script src="/JavaReadingNotes/lib/velocity/velocity.min.js?v=1.2.1"></script>
  <script src="/JavaReadingNotes/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

<script src="/JavaReadingNotes/js/utils.js?v=7.4.1.js"></script>

<script src="/JavaReadingNotes/js/motion.js?v=7.4.1.js"></script>


<script src="/JavaReadingNotes/js/schemes/pisces.js?v=7.4.1.js"></script>



<script src="/JavaReadingNotes/js/next-boot.js?v=7.4.1.js"></script>

<script src="/JavaReadingNotes/js/bookmark.js?v=7.4.1.js"></script>




  
  <script>
    (function(){
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      bp.src = (curProtocol === 'https') ? 'https://zz.bdstatic.com/linksubmit/push.js' : 'http://push.zhanzhang.baidu.com/push.js';
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
    })();
  </script>








  
<script src="/JavaReadingNotes/js/local-search.js?v=7.4.1.js"></script>















  

  

  


<script>
NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
  var GUEST = ['nick', 'mail', 'link'];
  var guest = 'nick,mail,link';
  guest = guest.split(',').filter(item => {
    return GUEST.includes(item);
  });
  new Valine({
    el: '#comments',
    verify: false,
    notify: false,
    appId: 'KVtEjXUX9wDimI183iDfg6tK-MdYXbMMI',
    appKey: 'mvmFgKF86C8Pi79KfVeFgzys',
    placeholder: '输入你的评论',
    avatar: 'mm',
    meta: guest,
    pageSize: '10' || 10,
    visitor: false,
    lang: '' || 'zh-cn',
    path: location.pathname,
    recordIP: false,
    serverURLs: ''
  });
}, window.Valine);
</script>

</body>
</html>
