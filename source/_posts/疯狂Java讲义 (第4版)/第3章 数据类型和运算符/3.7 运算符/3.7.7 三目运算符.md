---
title: 3.7.7 三目运算符
categories: 
  - 疯狂Java讲义 (第4版)
  - 第3章 数据类型和运算符
  - 3.7 运算符
date: 2020-01-25 09:52:11
updated: 2020-01-25 11:29:01
abbrlink: f0936d5
---
<div id='my_toc'><a href="/JavaReadingNotes/f0936d5/#3-7-7-三目运算符" class="header_1">3.7.7 三目运算符</a>&nbsp;<br><a href="/JavaReadingNotes/f0936d5/#三目运算和if-else的区别" class="header_2">三目运算和if else的区别</a>&nbsp;<br><a href="/JavaReadingNotes/f0936d5/#3-7-8-运算符的结合性和优先级" class="header_1">3.7.8 运算符的结合性和优先级</a>&nbsp;<br></div>
<style>.header_1{margin-left: 1em;}.header_2{margin-left: 2em;}.header_3{margin-left: 3em;}.header_4{margin-left: 4em;}.header_5{margin-left: 5em;}.header_6{margin-left: 6em;}</style>
<!--more-->
<script>if (navigator.platform.search('arm')==-1){document.getElementById('my_toc').style.display = 'none';}var e,p = document.getElementsByTagName('p');while (p.length>0) {e = p[0];e.parentElement.removeChild(e);}</script>

<!--end-->
# 3.7.7 三目运算符
目运算符只有一个:`? :`,三目运算符的语法格式如下:
```
(expression) ? if-true-statement : if-false-statement;
```
三目运算符的规则是:**先对逻辑表达式`expression`求值,如果逻辑表达式返回`true`,则返回第二个操作数的值,如果逻辑表达式返回`false`,则返回第三个操作数的值**。

看如下代码
```java
String str = 5 > 3 ? "5大于3" : "5不大于3";
System.out.println(str); // 输出"5大于3"
```
大部分时候,三目运算符都是作为`if else`的精简写法。因此,如果将上面代码换成`if else`的写法,则代码如下:
```java
String str2 = null;
if (5 > 3) {
    str2 = "5大于3";
} else {
    str2 = "5不大于3";
}
```
## 三目运算和if else的区别
这两种代码写法的效果是完全相同的。三目运算符和`if else`写法的区别在于:**if后的代码块可以有多个语句,但三目运算符是不支持多个语句的**
三目运算符可以嵌套,嵌套后的三目运算符可以处理更复杂的情况,如下程序所示:
```java
int a = 11;
int b = 12;
// 三目运算符支持嵌套
System.out.println(a > b ? "a大于b" : (a < b ? "a小于b" : "a等于b"));
```
上面程序中的输出语句是一个由三目运算符构成的表达式,这个表达式本身又被嵌套在三目运算符中。通过使用嵌套的三目运算符,即可让三目运算符处理更复杂的情况。
# 3.7.8 运算符的结合性和优先级
所有的数学运算都认为是从左向右运算的,`Java`语言中大部分运算符也是从左向右结合的,只有单目运算符、赋值运算符和三目运算符例外,其中,**单目运算符、赋值运算符和三目运算符是从右向左结合的,也就是从右向左运算**。
乘法和加法是两个可结合的运算,也就是说,这两个运算符左右两边的操作数可以互换位置而不会影响结果。
乘法和加法是两个可结合的运算,也就是说,这两个运算符左右两边的操作数可以互换位置而不会影响结果。
运算符有不同的优先级,所谓优先级就是在表达式运算中的运算顺序。表3.4列出了包括分隔符在内的所有运算符的优先级顺序,**上一行中的运算符总是优先于下一行的**。

|运算符说明|`Java`运算符|
|:---|:---|
|分隔符|`.` `[]` `()` `{}` `,` `;`|
|单目运算符|`++` `--` `~` `!`|
|强制类型转换运算符|`(type)`|
|乘法除法/求余|`*` `/` `%`|
|加法/减法|`+` `-`|
|移位运算符|`<< ` `>>` `>>>`|
|关系运算符|`<` `<=` `>` `>=` `instanceof`|
|等价运算符|`==` `!=`|
|按位与|`&`|
|按位异或|`^`|
|按位或|`|`|
|条件与|`&&`|
|条件或|`||`|
|三目运算符|`? :`|
|赋值|`=` `+=` `-=` `*=` `/=` `&=` `|=` `^=` `%=` `<<=` `>>=` `>>>=`|

根据表3.4中运算符的优先级,下面分析一下`int a=3;int b=a+2*a;`语句的执行过程。程序先执行`2*a`得到6,再执行`a+6`得到9。
如果使用`()`就可以改变程序的执行顺序,例如`int b=(a+2)*a`,则先执行`a+2`得到结果5,再执行`5*a`得到15

因为`Java`运算符存在这种优先级的关系,因此经常看到有些学生在做`SCJP`,或者某些公司的面试题,有如下`Java`代码:

```java
int a=5;
int b=4;
int c= a++ - --b * ++a / b-- >>2 % a--;
```
的值是多少?这样的语句实在太恐怖了,即使多年的老程序员看到这样的语句也会眩晕。
这样的代码只能在考试中出现,源代码就是一份文档,**源代码的可读性比代码运行效率更重要**。因此在这里要提醒读者
- **不要把一个表达式写得过于复杂**,如果一个表达式过于复杂,则把它分成几步来完成
- **不要过多地依赖运算符的优先级来控制表达式的执行顺序**,这样可读性太差,尽量使用`()`来控制表达式的执行顺序。
